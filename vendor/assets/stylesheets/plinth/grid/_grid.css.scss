//
// Grids - based on Foundation
// $author Ad Taylor
//
@import "compass/css3";


// ==========================================================================
// Conditional CSS - JS Detection
// ==========================================================================

@include conditional-CSS($grids);


// ==========================================================================
// Set default box model
// ==========================================================================

@if $setBoxSizing {
  * {
    @include box-sizing(border-box);
    *behavior: url(/boxsizing.htc);
  }
}


// ==========================================================================
// Container
// ==========================================================================

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
}

.container {
  width: $container-width;
  max-width: $container-max-width;
  min-width: $container-min-width;
  margin: 0 auto;

  @include clearfix;

  &.full {
    width: auto;
  }
}

// ==========================================================================
// Rows
// ==========================================================================

.row {
  @include clearfix;
  $padding-pos: 3;
  //$query-pos: 4;
  $query-pos: 5;

  @each $grid in $grids {
    @if(length($grid) == $query-pos ) {
      //@include media-query( nth($grid,$query-pos)) {
      @include media-query($grid) {
        .row {
          margin: 0 0px-(0.5*nth($grid,$padding-pos));
        }
      }
    }
    @else {
      @if(length($grid) > 1){
        .row {
          margin: 0 0-(0.5*nth($grid,$padding-pos));
        }
      }
    }
  }

  &.collapse {
    & > .column {
      padding-left: 0;
      padding: 0;
    }
  }
}

// ==========================================================================
// Columns
// ==========================================================================

.column {
  position: relative;
  
  //padding: 0 ($column-gutter/2);

  

  &.center {
    float: none;
    margin: 0 auto;
  }

  & > .suffix,
  & > .prefix {
    width: 100%;
  }
}


// ==========================================================================
// Off canvas 
// ==========================================================================

.off-canvas {

  .page-wrap {
    width: 100%;
  }

  .row { 
    overflow: hidden;

    .row { 
      overflow: visible;
    }
  }


  [role="main"]:before { 
    content: " ";
    position: absolute;
    z-index: -1; 
    top: 0; 
    left: -100%; 
    width: 100%; 
    height: 100%;
  }

  [role="complementary"], 
  [role="main"] { 
    width: 100%;
    display: block;
    position: relative;
    z-index: 1;
    @include transition(0.25s all ease-in)
  }


  [role="complementary"] {
    margin-left: -100%;
    width: 80%;
    height: 100%;
    float: left;
    position: absolute;
    z-index: 2;
  }

  [role="main"] { 
    margin-left: 0;
    float: right;
    z-index: 1;
    position: relative;
  }


  &.off-canvas-active {
    [role="complementary"] {
      margin-left: 0
    }

    [role="main"] {
      margin-right: -80%;
    }
  }


}


@mixin full-width-sidebar {
  .off-canvas {

    [role="complementary"] {
      width: 20%;
      margin-left: 0;
      float: left;
    }

    [role="main"] {
      width: 80%;
      padding: 0 1em;
    }

    &.off-canvas-active [role="main"] {
      margin-right: 0;
    }

    [data-sidebartoggle] {
      display: none;
    }
  }
}


@include media-query( $fixed-sidebar-size ) { @include full-width-sidebar;  }
@include old-ie { @include full-width-sidebar;  }


// ==========================================================================
// Image Blocks
// ==========================================================================

.img-block {
  .img {
    float:left;
    margin:0 $column-gutter*2 0 0;
  }

  .img-medium {
    margin-right: $column-gutter*4;
  }

  .img img {
    display:block;
  }

  .content {
    display:table-cell;
    width:10000px;
    *width:auto;
    *zoom:1;
  }
}
